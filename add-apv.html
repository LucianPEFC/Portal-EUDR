<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>AdaugÄƒ APV</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script type="module" src="add-apv.js"></script>
</head>
<body>
  <div class="container py-4">
    <h2>ðŸ“‹ AdaugÄƒ un nou APV</h2>
    <form id="apvForm">
      <div class="mb-3">
        <label class="form-label">NumÄƒr APV</label>
        <input type="text" id="numarAPV" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Specie</label>
        <input type="text" id="specie" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Volum (mc)</label>
        <input type="number" id="volum" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Unitate AmenajisticÄƒ (UA)</label>
        <input type="text" id="ua" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Certificat PEFC</label>
        <select id="pefc" class="form-select">
          <option value="true">Da</option>
          <option value="false">Nu</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Coordonate GPS</label>
        <input type="text" id="gps" class="form-control" placeholder="Ex: 45.7621, 24.1234" required>
      </div>
      <div id="map" style="height: 300px; margin-bottom: 20px;"></div>
      <button type="submit" class="btn btn-success">SalveazÄƒ APV</button>
      <a href="dashboard.html" class="btn btn-secondary ms-2">RenunÈ›Äƒ</a>
    </form>
  </div>
  <script>
    const map = L.map('map').setView([45.9432, 24.9668], 6);
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Â© Esri, Maxar, Earthstar Geographics'
    }).addTo(map);

    let marker;
    map.on('click', function(e) {
      const { lat, lng } = e.latlng;
      document.getElementById('gps').value = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
      if (marker) {
        marker.setLatLng(e.latlng);
      } else {
        marker = L.marker(e.latlng, { draggable: true }).addTo(map);
        marker.on('dragend', function(evt) {
          const pos = evt.target.getLatLng();
          document.getElementById('gps').value = `${pos.lat.toFixed(6)}, ${pos.lng.toFixed(6)}`;
        });
      }
    });
  </script>
</body>
</html>
